<html>  
  <head>  
        <meta charset="utf-8">  
		
        <title>树状图</title>
		<script src="/static/js/d3.v7.min.js"></script>  
		<link rel="stylesheet" href="/static/css/tree.css">
  </head> 
<body>

<svg width="400" height="220">
    <g transform="translate(5, 5)">
      <g class="links"></g>
      <g class="nodes"></g>
    </g>
</svg>
<script>
	var data = {
	   "name": "A1",
	   "children": [
		   {
			   "name": "B1",
			   "children": [
				   {
					   "name": "C1",
					   "value": 100
				   },
				   {
					   "name": "C2",
					   "value": 300
				   },
				   {
					   "name": "C3",
					   "value": 200
				   }
			   ]
		   },
		   {
			   "name": "B2",
			   "value": 200
		   }
	   ]
   }
   
   var treeLayout = d3.tree()
	   .size([400, 200])
   
   var root = d3.hierarchy(data)
   
   treeLayout(root)
   
   // Nodes
   d3.select('svg g.nodes')
	   .selectAll('circle.node')
	   .data(root.descendants())
	   .join('circle')
	   .classed('node', true)
	   .attr('cx', function(d) {return d.x;})
	   .attr('cy', function(d) {return d.y;})
	   .attr('r', 4);
   
   // Links
   d3.select('svg g.links')
	   .selectAll('line.link')
	   .data(root.links())
	   .join('line')
	   .classed('link', true)
	   .attr('x1', function(d) {return d.source.x;})
	   .attr('y1', function(d) {return d.source.y;})
	   .attr('x2', function(d) {return d.target.x;})
	   .attr('y2', function(d) {return d.target.y;});
   
   
   
   
   
   
   
   // var width = 500,
   // height = 500;
	
   // var tree = d3.tree()
   // 	.size([width, height-200])
   // 	.separation(function(a, b) { return (a.parent == b.parent ? 1 : 2); });
	
   // var diagonal = d3.line()
   //     .x(function(d) { return d.x; })
   //     .y(function(d) { return d.y; })
   //     .curve(d3.curveLinear);
   
   // var svg = d3.select("body").append("svg")
   // 	.attr("width", width)
   // 	.attr("height", height)
   // 	.append("g")
   // 	.attr("transform", "translate(40,0)");
	
	
	
   // d3.json("static/flare.json")
   // .then(function(root)  {
   //     console.log(root);
   // 	var nodes = tree.nodes(root);
   // 	var links = tree.links(nodes);
	   
   // 	console.log(nodes);
   // 	console.log(links);
	   
   // 	var link = svg.selectAll(".link")
   // 	  .data(links)
   // 	  .enter()
   // 	  .append("path")
   // 	  .attr("class", "link")
   // 	  .attr("d", diagonal);
	   
   // 	var node = svg.selectAll(".node")
   // 	  .data(nodes)
   // 	  .enter()
   // 	  .append("g")
   // 	  .attr("class", "node")
   // 	  .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })
	   
   // 	node.append("circle")
   // 	  .attr("r", 4.5);
	   
   // 	node.append("text")
   // 	  .attr("dx", function(d) { return d.children ? -8 : 8; })
   // 	  .attr("dy", 3)
   // 	  .style("text-anchor", function(d) { return d.children ? "end" : "start"; })
   // 	  .text(function(d) { return d.name; });
   // 	});
	
   </script>
    </body>  
</html>  

